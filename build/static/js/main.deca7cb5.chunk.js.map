{"version":3,"sources":["visualizer/res/SINE WAVES & SUMS.svg","visualizer/Banner.js","visualizer/Canvas.js","visualizer/sounds/SoundfontProvider.js","visualizer/Keyboard.js","visualizer/res/Themes.js","visualizer/Dashboard.js","visualizer/GradientColorPicker.js","visualizer/Visualizer.js","index.js"],"names":["module","exports","__webpack_require__","p","Banner","react_default","a","createElement","className","src","require","alt","React","Component","lineWidth","tuneF","xScale","yScale","exposureScale","decayActive","decayInActive","Canvas","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updatePhase","setState","phaseOffset","state","Math","PI","phaseChange","updateAmplitudeAttack","prevProps","sustain","amplitudes","clear","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","pressedNotes","Symbol","iterator","next","done","note","value","includes","set","err","return","updateAmplitudeDecay","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref3","_ref2","slicedToArray","midi","amp","stickyKey","delete","buildGradient","gradient","i","colors","length","addColorStop","colorValues","concat","r","g","b","midiToFrequency","pow","getNormalizationScale","scale","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_ref6","updateCanvas","ctx","refs","canvas","getContext","w","width","h","height","yOffset","xOffset","lineJoin","strokeStyle","createLinearGradient","fillStyle","exposure","fillRect","beginPath","normalizeScale","phase","x","y","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_ref9","frequency","get","sin","translate","lineTo","stroke","requestAnimationFrame","Map","clearInterval","interval","ref","SoundfontProvider","loadInstrument","instrumentName","instrument","Soundfont","audioContext","format","soundfont","nameToUrl","name","hostname","then","playNote","midiNumber","audioNode","activeAudioNodes","stop","resume","play","assign","defineProperty","stopNote","onStopNote","stopAllNotes","values","forEach","node","bind","assertThisInitialized","prevState","render","isLoading","defaultProps","window","AudioContext","webkitAudioContext","noteRange","first","MidiNumbers","fromNote","last","mobileNoteRange","keyboardShortcuts","KeyboardShortcuts","create","firstNote","lastNote","keyboardConfig","QWERTY_ROW","Keyboard","handleKeyDown","event","key","onSustain","handleKeyUp","document","addEventListener","removeEventListener","_this2","classNames","h-100 pb-3","isMobile","sounds_SoundfontProvider","_ref","react_piano_esm","onPlayNoteInput","disabled","activeNotes","keyboard_footer--active","onMouseDown","options","label","Dashboard","renderThumb","isDragged","style","objectSpread","scaleToRange","log","rangeToScale","rangeToScaleString","scaleRange","min","max","children","background","getTrackBackground","selectStyle","control","styles","borderColor","backgroundColor","color","placeholder","singleValue","data","option","_ref4","isDisabled","isFocused","isSelected","react_range_lib","step","renderTrack","getRenderTrack","onChange","setTranslate","setScale","setExposure","Number","toFixed","setPhaseChange","dashboard--toggle-on","onStickyKey","class","colorStopCount","onAddColorStop","onRemoveColorStop","react_select_esm","menuPlacement","themes","defaultValue","theme","borderRadius","spacing","controlHeight","baseUnit","menuGutter","primary","setTheme","MAX","MIN","GradientColorPicker","handleClick","e","ReactDOM","findDOMNode","contains","target","arr","displayColorPicker","push","setDisplayColorPicker","index","mid","react_transition_group","in","timeout","unmountOnExit","onMouseEnter","disableRange","onMouseLeave","transform","react_color_lib","disableAlpha","onColorChange","onColorValueChange","Visualizer","pressNote","toConsumableArray","splice","indexOf","slice","toggleSustain","toggleStickyKey","rgb","colorArr","valueArr","floor","removeColorStop","pop","console","setGradient","h-100","react_custom_properties_default","global","properties","--main-gradient","h-75","react_container_dimensions_lib_default","visualizer_Canvas","visualizer_GradientColorPicker","visualizer_Dashboard","h-25","visualizer_Keyboard","rootElement","getElementById","visualizer_Banner","visualizer_Visualizer"],"mappings":"mHAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,6MCazBC,mLATX,OACEC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,UACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAeC,IAAKC,EAAQ,KAAgCC,IAAK,sBAChFN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,6BALFI,IAAMC,2BCCrBC,EAAY,EACZC,EAAQ,IACRC,EAAS,KACTC,EAAS,IACTC,EAAgB,KAChBC,EAAc,IACdC,EAAgB,GA2IPC,cAzHb,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAqBRQ,YAAc,WACZP,EAAKQ,SAAS,CACZC,YAAaT,EAAKU,MAAMD,YAAc,EAAIE,KAAKC,GAAKZ,EAAKD,MAAMc,YAAc,OAxB9Db,EA4BnBc,sBAAwB,SAACC,GACpBA,EAAUC,SAAWD,EAAUC,UAAYhB,EAAKD,MAAMiB,SACvDhB,EAAKiB,WAAWC,QAFmB,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAKrC,QAAAC,EAAAC,EAAgBxB,EAAKD,MAAM0B,aAA3BC,OAAAC,cAAAR,GAAAI,EAAAC,EAAAI,QAAAC,MAAAV,GAAA,EAAyC,KAAjCW,EAAiCP,EAAAQ,MACnChB,EAAUU,aAAaO,SAASF,IAClC9B,EAAKiB,WAAWgB,IAAIH,EAAM,IAPO,MAAAI,GAAAd,GAAA,EAAAC,EAAAa,EAAA,YAAAf,GAAA,MAAAK,EAAAW,QAAAX,EAAAW,SAAA,WAAAf,EAAA,MAAAC,KA5BpBrB,EAwCnBoC,qBAAuB,WAAM,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAjB,EAAA,IAC3B,QAAAkB,EAAAC,EAAwBzC,EAAKiB,WAA7BS,OAAAC,cAAAU,GAAAG,EAAAC,EAAAb,QAAAC,MAAAQ,GAAA,EAAyC,KAAAK,EAAAF,EAAAT,MAAAY,EAAA1C,OAAA2C,EAAA,EAAA3C,CAAAyC,EAAA,GAA/BG,EAA+BF,EAAA,GAAzBG,EAAyBH,EAAA,GACpC3C,EAAKD,MAAMgD,UACR/C,EAAKD,MAAM0B,aAAaO,SAASa,IACnC7C,EAAKiB,WAAW+B,OAAOH,GAEjBC,EAAM,KACd9C,EAAKiB,WAAW+B,OAAOH,GACd7C,EAAKD,MAAMiB,SAAWhB,EAAKD,MAAM0B,aAAaO,SAASa,GAChE7C,EAAKiB,WAAWgB,IAAIY,EAAMC,EAAMlD,GAEhCI,EAAKiB,WAAWgB,IAAIY,EAAMC,EAAMjD,IAXT,MAAAqC,GAAAI,GAAA,EAAAC,EAAAL,EAAA,YAAAG,GAAA,MAAAI,EAAAN,QAAAM,EAAAN,SAAA,WAAAG,EAAA,MAAAC,KAxCVvC,EAwDnBiD,cAAgB,SAAAC,GACd,IAAI,IAAIC,EAAI,EAAGA,EAAInD,EAAKD,MAAMqD,OAAOC,OAAQF,IAC3CD,EAASI,aACPtD,EAAKD,MAAMwD,YAAYJ,GAAG,IAD5B,QAAAK,OAEWxD,EAAKD,MAAMqD,OAAOD,GAAGM,EAFhC,MAAAD,OAEwCxD,EAAKD,MAAMqD,OAAOD,GAAGO,EAF7D,MAAAF,OAEqExD,EAAKD,MAAMqD,OAAOD,GAAGQ,EAF1F,SAIF,OAAOT,GA9DUlD,EAiEnB4D,gBAAkB,SAAAf,GAAI,OAAIlC,KAAKkD,IAAI,GAAIhB,EAAK,IAAI,IAAMrD,GAjEnCQ,EAmEnB8D,sBAAwB,WACtB,IAAIC,EAAQ,EADgBC,GAAA,EAAAC,GAAA,EAAAC,OAAA5C,EAAA,IAE5B,QAAA6C,EAAAC,EAAkBpE,EAAKiB,WAAvBS,OAAAC,cAAAqC,GAAAG,EAAAC,EAAAxC,QAAAC,MAAAmC,GAAA,EAAmC,KAAAK,EAAAF,EAAApC,MACjCgC,GADiC9D,OAAA2C,EAAA,EAAA3C,CAAAoE,EAAA,OAFP,MAAAnC,GAAA+B,GAAA,EAAAC,EAAAhC,EAAA,YAAA8B,GAAA,MAAAI,EAAAjC,QAAAiC,EAAAjC,SAAA,WAAA8B,EAAA,MAAAC,GAK5B,OAAOH,EAAQ,EAAI,EAAI,EAAEA,GAxER/D,EA2EnBsE,aAAe,WACb,IAAMC,EAAMvE,EAAKwE,KAAKC,OAAOC,WAAW,MACpCC,EAAI3E,EAAKD,MAAM6E,MACfC,EAAI7E,EAAKD,MAAM+E,OACfC,EAAUF,EAAE,EACZG,EAAUL,EAAE,EAEhBJ,EAAIU,SAAW,QACfV,EAAIhF,UAAYA,EAEhBgF,EAAIW,YAAclF,EAAKiD,cAAcsB,EAAIY,qBAAqB,EAAE,EAAER,EAAE,IAEpEJ,EAAIa,UAAJ,cAAA5B,OAA8B7C,KAAKkD,IAAIlE,GAAgBK,EAAKD,MAAMsF,UAAlE,KACAd,EAAIe,SAAS,EAAG,EAAGX,EAAGE,GAEtBN,EAAIgB,YAIJ,IAFA,IAAIC,EAAiBxF,EAAK8D,wBACtB2B,GAAUzF,EAAKU,MAAMD,YAChBiF,GAAK,EAAGA,EAAIf,EAAE,EAAGe,GAAG,EAAG,CAC9B,IAAIC,EAAIZ,EADsBa,GAAA,EAAAC,GAAA,EAAAC,OAAAxE,EAAA,IAE9B,QAAAyE,EAAAC,EAAkBhG,EAAKiB,WAAvBS,OAAAC,cAAAiE,GAAAG,EAAAC,EAAApE,QAAAC,MAAA+D,GAAA,EAAmC,KAAAK,EAAAF,EAAAhE,MAA1Bc,EAA0B5C,OAAA2C,EAAA,EAAA3C,CAAAgG,EAAA,MAC7BC,EAAYlG,EAAK4D,gBAAgBf,GAAQpD,EAG7CkG,GAFiBjG,EAASqF,GAAY/E,EAAKiB,WAAWkF,IAAItD,GAAQ2C,GAEjD7E,KAAKyF,IAAIF,GAAalG,EAAKD,MAAMgE,OAAS2B,EAAIV,EAAUhF,EAAKD,MAAMsG,YAAcZ,IANtE,MAAAvD,GAAA2D,GAAA,EAAAC,EAAA5D,EAAA,YAAA0D,GAAA,MAAAI,EAAA7D,QAAA6D,EAAA7D,SAAA,WAAA0D,EAAA,MAAAC,GAQ9BvB,EAAI+B,OAAOZ,EAAGC,GAGhBpB,EAAI+B,OAAO3B,EAAE,EAAGI,GAEhBR,EAAIgC,SAEJvG,EAAKO,cACLP,EAAKoC,uBACLoE,sBAAsBxG,EAAKsE,eA5G3BtE,EAAKU,MAAQ,CACXD,YAAa,GAGfT,EAAKiB,WAAa,IAAIwF,IAAI,IAPTzG,mFAWjBwG,sBAAsBrG,KAAKmE,yDAGVvD,GACjBZ,KAAKW,sBAAsBC,kDAI3B2F,cAAcvG,KAAKwG,2CAgGnB,OACE7H,EAAAC,EAAAC,cAAA,UAAQ4H,IAAI,SAAShC,MAAOzE,KAAKJ,MAAM6E,MAAOE,OAAQ3E,KAAKJ,MAAM+E,gBApIlDzF,IAAMC,qDCPrBuH,cAoBJ,SAAAA,EAAY9G,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0G,IACjB7G,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4G,GAAAvG,KAAAH,KAAMJ,KAuBR+G,eAAiB,SAAAC,GAEf/G,EAAKQ,SAAS,CACZwG,WAAY,OAEdC,IAAUD,WAAWhH,EAAKD,MAAMmH,aAAcH,EAAgB,CAC5DI,OAAQnH,EAAKD,MAAMoH,OACnBC,UAAWpH,EAAKD,MAAMqH,UACtBC,UAAW,SAACC,EAAMF,EAAWD,GAC3B,SAAA3D,OAAUxD,EAAKD,MAAMwH,SAArB,KAAA/D,OAAiC4D,EAAjC,KAAA5D,OAA8C8D,EAA9C,KAAA9D,OAAsD2D,EAAtD,UAEDK,KAAK,SAAAR,GACNhH,EAAKQ,SAAS,CACZwG,kBArCahH,EA0CnByH,SAAW,SAAAC,GACT,IAAMC,EAAY3H,EAAKU,MAAMkH,iBAAiBF,GAC9C,GAAIC,EAAW,CACb,GAAG3H,EAAKD,MAAMgD,UACZ,OAEA4E,EAAUE,OAGd7H,EAAKD,MAAMmH,aAAaY,SAASN,KAAK,WACpC,IAAMG,EAAY3H,EAAKU,MAAMsG,WAAWe,KAAKL,GAC7C1H,EAAKQ,SAAS,CACZoH,iBAAkB3H,OAAO+H,OAAO,GAAIhI,EAAKU,MAAMkH,iBAA7B3H,OAAAgI,EAAA,EAAAhI,CAAA,GACfyH,EAAaC,SAvDH3H,EA6DnBkI,SAAW,SAAAR,GACT1H,EAAKD,MAAMoI,WAAWT,GAEtB1H,EAAKD,MAAMmH,aAAaY,SAASN,KAAK,WAChCxH,EAAKD,MAAMiB,SAAWhB,EAAKD,MAAMgD,YAGnB/C,EAAKU,MAAMkH,iBAAiBF,GACpCG,OACV7H,EAAKQ,SAAS,CACZoH,iBAAkB3H,OAAO+H,OAAO,GAAIhI,EAAKU,MAAMkH,iBAA7B3H,OAAAgI,EAAA,EAAAhI,CAAA,GACfyH,EAAa,aAxEH1H,EA+EnBoI,aAAe,WACbpI,EAAKD,MAAMmH,aAAaY,SAASN,KAAK,WACXvH,OAAOoI,OAAOrI,EAAKU,MAAMkH,kBACjCU,QAAQ,SAAAC,GACnBA,GACFA,EAAKV,SAGT7H,EAAKQ,SAAS,CACZoH,iBAAkB,QAtFtB5H,EAAKU,MAAQ,CACXkH,iBAAkB,GAClBZ,WAAY,MAGdhH,EAAKyH,SAAWzH,EAAKyH,SAASe,KAAdvI,OAAAwI,EAAA,EAAAxI,QAAAwI,EAAA,EAAAxI,CAAAD,KAPCA,mFAWjBG,KAAK2G,eAAe3G,KAAKJ,MAAMgH,2DAGdhG,EAAW2H,GACxB3H,EAAUgG,iBAAmB5G,KAAKJ,MAAMgH,gBAC1C5G,KAAK2G,eAAe3G,KAAKJ,MAAMgH,iBAE5BhG,EAAUC,SAAWD,EAAUC,UAAYb,KAAKJ,MAAMiB,SACtDD,EAAUgC,YAAc5C,KAAKJ,MAAMgD,YACtC5C,KAAKiI,gDA0EP,OAAOjI,KAAKJ,MAAM4I,OAAO,CACvBC,WAAYzI,KAAKO,MAAMsG,WACvBS,SAAUtH,KAAKsH,SACfS,SAAU/H,KAAK+H,SACfE,aAAcjI,KAAKiI,sBAtHO/I,IAAMC,WAAhCuH,EAcGgC,aAAe,CACpB1B,OAAQ,MACRC,UAAW,aACXL,eAAgB,wBA0GLF,yBCtHTK,UAAe,IAAK4B,OAAOC,cAAgBD,OAAOE,qBAIlDC,EAAY,CAChBC,MAAOC,IAAYC,SAAS,MAC5BC,KAAMF,IAAYC,SAAS,OAGvBE,EAAkB,CACtBJ,MAAOC,IAAYC,SAAS,MAC5BC,KAAMF,IAAYC,SAAS,OAGvBG,EAAoBC,IAAkBC,OAAO,CACjDC,UAAWP,IAAYC,SAAS,MAChCO,SAAUR,IAAYC,SAAS,MAC/BQ,eAAgBJ,IAAkBK,aA+ErBC,6MAtDbC,cAAgB,SAAAC,GACXhK,EAAKD,MAAMiB,SAEW,MAAdgJ,EAAMC,KACfjK,EAAKD,MAAMmK,eAIfC,YAAc,SAAAH,GACRhK,EAAKD,MAAMiB,SAAyB,MAAdgJ,EAAMC,KAC9BjK,EAAKD,MAAMmK,gGAnBbE,SAASC,iBAAiB,UAAWlK,KAAK4J,eAC1CK,SAASC,iBAAiB,QAASlK,KAAKgK,4DAIxCC,SAASE,oBAAoB,UAAWnK,KAAK4J,eAC7CK,SAASE,oBAAoB,QAASnK,KAAKgK,8CAiBpC,IAAAI,EAAApK,KACP,OACErB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAWuL,IAAW,gBAAiB,CAACC,aAAeC,cAC1D5L,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mBACfH,EAAAC,EAAAC,cAAC2L,EAAD,CACE5D,eAAe,uBACfG,aAAcA,EACdK,SA/Dc,wCAgEdvG,QAASb,KAAKJ,MAAMiB,QACpBmH,WAAYhI,KAAKJ,MAAMoI,WACvB1G,aAActB,KAAKJ,MAAM0B,aACzBsB,UAAW5C,KAAKJ,MAAMgD,UACtB4F,OAAQ,SAAAiC,GAAA,IAAGhC,EAAHgC,EAAGhC,UAAWnB,EAAdmD,EAAcnD,SAAUS,EAAxB0C,EAAwB1C,SAAxB,OACNpJ,EAAAC,EAAAC,cAAC6L,EAAA,EAAD,CACE5B,UAAWyB,WAAWpB,EAAkBL,EACxCxB,SAAUA,EACVS,SAAUA,EACV4C,gBAAiBP,EAAKxK,MAAM+K,gBAC5BC,SAAUnC,EACVoC,YAAaT,EAAKxK,MAAM0B,aACxB8H,kBAAmBmB,WAAW,KAAMnB,SAK1CmB,YACA5L,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kCACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAWuL,IAAW,2BAA4B,CACnDS,0BAA4B9K,KAAKJ,MAAMiB,UAEzCkK,YAAa/K,KAAKJ,MAAMmK,qBAnEf7K,IAAMC,oCC6Dd6L,EA1FD,CACZ,CAAEpJ,MAAO,CACPqB,OAAQ,CACN,CAACK,EAAG,IAAKC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,KAC5B,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,IAAKC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,MAE9BsJ,OAAQ,CAAC,EAAG,GAAI,GAAI,GAAI,KAE1B+C,MAAO,aAEP,CAAErJ,MAAO,CACLqB,OAAQ,CACN,CAACK,EAAG,IAAKC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,KAC5B,CAAC0E,EAAG,MAAOC,EAAG,KAAMC,EAAG,KAAM5E,EAAG,KAChC,CAAC0E,EAAG,MAAOC,EAAG,IAAKC,EAAG,MAAO5E,EAAG,KAChC,CAAC0E,EAAG,IAAKC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,MAE9BsJ,OAAQ,CAAC,EAAG,GAAI,GAAI,MAEtB+C,MAAO,YAEP,CAAErJ,MAAO,CACPqB,OAAQ,CACN,CAACK,EAAG,KAAMC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KACjC,CAAC0E,EAAG,MAAOC,EAAG,KAAMC,EAAG,MAAO5E,EAAG,KACjC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,MAEpCsJ,OAAQ,CAAC,GAAI,GAAI,GAAI,GAAI,KAE3B+C,MAAO,WAEP,CAAErJ,MAAO,CACPqB,OAAQ,CACN,CAACK,EAAG,MAAOC,EAAG,MAAOC,EAAG,KAAM5E,EAAG,KACjC,CAAC0E,EAAG,MAAOC,EAAG,KAAMC,EAAG,KAAM5E,EAAG,KAChC,CAAC0E,EAAG,MAAOC,EAAG,KAAMC,EAAG,KAAM5E,EAAG,KAChC,CAAC0E,EAAG,KAAMC,EAAG,IAAKC,EAAG,MAAO5E,EAAG,KAC/B,CAAC0E,EAAG,KAAMC,EAAG,KAAMC,EAAG,KAAM5E,EAAG,MAEjCsJ,OAAQ,CAAC,GAAI,GAAI,GAAI,GAAI,KAE3B+C,MAAO,UAEP,CAAErJ,MAAO,CACPqB,OAAQ,CACN,CAACK,EAAG,IAAKC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,KAC5B,CAAC0E,EAAG,KAAMC,EAAG,KAAMC,EAAG,KAAM5E,EAAG,KAC/B,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,KAAMC,EAAG,KAAMC,EAAG,KAAM5E,EAAG,KAC/B,CAAC0E,EAAG,IAAKC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,MAE9BsJ,OAAQ,CAAC,GAAI,GAAI,GAAI,GAAI,KAE3B+C,MAAO,QAEP,CAAErJ,MAAO,CACPqB,OAAQ,CACN,CAACK,EAAG,IAAKC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,KAC5B,CAAC0E,EAAG,KAAMC,EAAG,IAAKC,EAAG,KAAM5E,EAAG,KAC9B,CAAC0E,EAAG,MAAOC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,KAC9B,CAAC0E,EAAG,MAAOC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,KAC9B,CAAC0E,EAAG,MAAOC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,KAC9B,CAAC0E,EAAG,KAAMC,EAAG,IAAKC,EAAG,KAAM5E,EAAG,KAC9B,CAAC0E,EAAG,IAAKC,EAAG,IAAKC,EAAG,IAAK5E,EAAG,MAE9BsJ,OAAQ,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,KAEnC+C,MAAO,cAEP,CAAErJ,MAAO,CACPqB,OAAQ,CACN,CAACK,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,KAClC,CAAC0E,EAAG,MAAOC,EAAG,MAAOC,EAAG,MAAO5E,EAAG,MAEpCsJ,OAAQ,CAAC,GAAI,GAAI,GAAI,GAAI,KAE3B+C,MAAO,oBC0JIC,cAjMb,SAAAA,EAAYtL,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAkL,IACjBrL,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAoL,GAAA/K,KAAAH,KAAMJ,KAURuL,YAAc,SAAAV,GAAA,IAAG7K,EAAH6K,EAAG7K,MAAH6K,EAAUW,UAAV,OACZzM,EAAAC,EAAAC,cAAA,MAAAiB,OAAA+H,OAAA,CAAK/I,UAAU,yBACTc,EADN,CAEEyL,MAAKvL,OAAAwL,EAAA,EAAAxL,CAAA,GAAMF,EAAMyL,WAdFxL,EAsCnB0L,aAAe,SAAC3J,GACd,OAAOpB,KAAKgL,IAAI5J,GAAOpB,KAAKgL,IAAI,IAvCf3L,EA0CnB4L,aAAe,SAAC7J,GACd,OAAApB,KAAAkD,IAAO,EAAK9B,IA3CK/B,EA8CnB6L,mBAAqB,SAAC9J,GACpB,OAAOA,GAAS,EAATpB,KAAAkD,IAAa,EAAK9B,GAAlB,KAAAyB,OAAA7C,KAAAkD,IAA+B,GAAO9B,KA5C7C/B,EAAKU,MAAQ,CACX2E,SAAU,CAACrF,EAAKD,MAAMsF,UACtBxE,YAAa,CAACb,EAAKD,MAAMc,aACzBiL,WAAY,CAAC9L,EAAK0L,aAAa1L,EAAKD,MAAMgE,QAC1CsC,UAAW,CAACrG,EAAKD,MAAMsG,YAPRrG,8EAkBJqI,EAAQ0D,EAAKC,GAC1B,OAAO,SAAArJ,GAAA,IAAG5C,EAAH4C,EAAG5C,MAAOkM,EAAVtJ,EAAUsJ,SAAV,OACLnN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,8BACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BACbuM,MAAKvL,OAAAwL,EAAA,EAAAxL,CAAA,GAAMF,EAAMyL,MAAZ,CACHU,WAAYC,6BAAmB,CAC7B9D,OAAQA,EACRjF,OAAQ,CAAC,cAAe,QACxB2I,IAAKA,EACLC,IAAKA,OAGTlN,EAAAC,EAAAC,cAAA,MAAAiB,OAAA+H,OAAA,GAASjI,EAAT,CAAgBd,UAAU,oBACvBgN,uCAmBF,IAAA1B,EAAApK,KACHiM,EAAc,CAChBC,QAAS,SAAAC,GAAM,OAAArM,OAAAwL,EAAA,EAAAxL,CAAA,GAAUqM,EAAV,CAAkBC,YAAa,QAASC,gBAAiB,UAAWC,MAAO,WAC1FC,YAAa,SAAAJ,GAAM,OAAArM,OAAAwL,EAAA,EAAAxL,CAAA,GAAUqM,EAAV,CAAmBC,YAAa,QAASE,MAAO,WACnEE,YAAa,SAACL,EAAD5J,KAAWkK,KAAX,OAAA3M,OAAAwL,EAAA,EAAAxL,CAAA,GAA4BqM,EAA5B,CAAoCC,YAAa,QAASE,MAAO,WAC9EI,OAAQ,SAACP,EAADQ,GAAyDA,EAA9CF,KAA8C,IAAxCG,EAAwCD,EAAxCC,WAAYC,EAA4BF,EAA5BE,UAAWC,EAAiBH,EAAjBG,WAC9C,OAAOhN,OAAAwL,EAAA,EAAAxL,CAAA,GAAIqM,EAAX,CACEE,gBAAiBO,EAAa,KAAOE,EAAa,QAAUD,EAAY,YAAc,OACtFP,MAAOM,EAAa,OAASE,EAAa,QAAU,YAmB1D,OACEnO,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,4BAEfH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,2BAAAwE,OAAsBrD,KAAKO,MAAM2F,UAAjC,UACAvH,EAAAC,EAAAC,cAACkO,EAAA,MAAD,CACElB,IA/GO,IAgHPD,KA/GO,IAgHPoB,KA/GQ,EAgHR9E,OAAQlI,KAAKO,MAAM2F,UACnB+G,YAAajN,KAAKkN,eAAelN,KAAKO,MAAM2F,WAlHrC,IADA,KAoHPiF,YAAanL,KAAKmL,YAClBgC,SAAU,SAAAvL,GACNwI,EAAK/J,SAAS,CAAC6F,UAAWtE,IAC1BwI,EAAKxK,MAAMwN,aAAaxL,EAAM,QAGtCjD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,wBAAAwE,OAAmBrD,KAAK0L,mBAAmB1L,KAAKO,MAAMoL,cACtDhN,EAAAC,EAAAC,cAACkO,EAAA,MAAD,CACElB,IAjIG,EAkIHD,KAjIG,EAkIHoB,KAjII,EAkIJ9E,OAAQlI,KAAKO,MAAMoL,WACnBsB,YAAajN,KAAKkN,eAAelN,KAAKO,MAAMoL,YApIzC,EADA,GAsIHR,YAAanL,KAAKmL,YAClBgC,SAAU,SAAAvL,GACNwI,EAAK/J,SAAS,CAACsL,WAAY/J,IAC3BwI,EAAKxK,MAAMyN,SAASjD,EAAKqB,aAAa7J,EAAM,UAKtDjD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,0BAAAwE,OAAqBrD,KAAKO,MAAM2E,SAAhC,MACAvG,EAAAC,EAAAC,cAACkO,EAAA,MAAD,CACElB,IA1JM,IA2JND,IA1JM,EA2JNoB,KA1JO,EA2JP9E,OAAQlI,KAAKO,MAAM2E,SACnB+H,YAAajN,KAAKkN,eAAelN,KAAKO,MAAM2E,SA7JtC,EADA,KA+JNiG,YAAanL,KAAKmL,YAClBgC,SAAU,SAAAvL,GACNwI,EAAK/J,SAAS,CAAC6E,SAAUtD,IACzBwI,EAAKxK,MAAM0N,YAAY1L,EAAM,QAGrCjD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,8BAAAwE,OAAoBkK,OAAOvN,KAAKO,MAAMG,aAAa8M,QAAQ,GAA3D,oBACA7O,EAAAC,EAAAC,cAACkO,EAAA,MAAD,CACElB,IApKG,IAqKHD,IApKG,EAqKHoB,KApKI,GAqKJ9E,OAAQlI,KAAKO,MAAMG,YACnBuM,YAAajN,KAAKkN,eAAelN,KAAKO,MAAMG,YAvKzC,EADA,KAyKHyK,YAAanL,KAAKmL,YAClBgC,SAAU,SAAAvL,GACRwI,EAAK/J,SAAS,CAACK,YAAakB,IAC5BwI,EAAKxK,MAAM6N,eAAe7L,EAAM,SAKxCjD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,uCACAF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAWuL,IAAW,mBAAoB,CAC3CqD,uBAAyB1N,KAAKJ,MAAMgD,YAEtCmI,YAAa/K,KAAKJ,MAAM+N,gBAI9BhP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,2BACbH,EAAAC,EAAAC,cAAA,OAAK+O,MAAM,QACTjP,EAAAC,EAAAC,cAAA,+GAKNF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,6BAAAwE,OAAwBrD,KAAKJ,MAAMiO,iBACnClP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACbiM,YAAa/K,KAAKJ,MAAMiO,eA5LnB,GA4LmD7N,KAAKJ,MAAMkO,eAAiB,OACtFnP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,yBACbiM,YAAa/K,KAAKJ,MAAMiO,eA7LnB,EA6LmD7N,KAAKJ,MAAMmO,kBAAoB,SAG7FpP,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,mCACbH,EAAAC,EAAAC,cAACmP,EAAA,EAAD,CACEC,cAAc,MACdjD,QAASkD,EACTC,aAAcD,EAAO,GACrBjD,MAAM,SACNkB,OAAQF,EACRmC,MAtHE,SAACA,GAAD,OAAAtO,OAAAwL,EAAA,EAAAxL,CAAA,GACbsO,EADa,CAEhBC,aAAc,MACdC,QAAQxO,OAAAwL,EAAA,EAAAxL,CAAA,GACHsO,EAAME,QADJ,CAELC,cAAe,OACfC,SAAU,IACVC,WAAY,MAEdxL,OAAOnD,OAAAwL,EAAA,EAAAxL,CAAA,GACJsO,EAAMnL,OADH,CAEJyL,QAAS,aA4GGvB,SAAU,SAACT,GAAD,OAAYtC,EAAKxK,MAAM+O,SAASjC,EAAO9K,uBAxM7C1C,IAAMC,4BCnBxByP,EAAM,IACNC,EAAM,EA6GGC,cAjGb,SAAAA,EAAYlP,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA8O,IACjBjP,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgP,GAAA3O,KAAAH,KAAMJ,KAgBRmP,YAAc,SAAAC,GACZ,IAAIC,IAASC,YAATpP,OAAAwI,EAAA,EAAAxI,QAAAwI,EAAA,EAAAxI,CAAAD,KAA2BsP,SAASH,EAAEI,QAAS,CAEjD,IADA,IAAIC,EAAM,GACFrM,EAAI,EAAGA,EAAInD,EAAKU,MAAM+O,mBAAmBpM,OAAQF,IACvDqM,EAAIE,MAAK,GAEX1P,EAAKQ,SAAS,CAAEiP,mBAAoBD,MAvBrBxP,EA2BnB2P,sBAAwB,SAACC,EAAO7N,GAC9B,IAAIyN,EAAMxP,EAAKU,MAAM+O,mBACrBD,EAAII,GAAS7N,EACb/B,EAAKQ,SAAS,CAAEiP,mBAAoBD,KA9BnBxP,EAiCnBsL,YAAc,SAAAV,GAAiC,IAA9B7K,EAA8B6K,EAA9B7K,MAAkB6P,GAAYhF,EAAvBW,UAAuBX,EAAZgF,OAC7BC,GAAOd,EAAMC,GAAK,EAEtB,OACElQ,EAAAC,EAAAC,cAAA,MAAAiB,OAAA+H,OAAA,CAAK/I,UAAU,8CAAiDc,GAC9DjB,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kCACbiM,YAAa,kBAAMlL,EAAK2P,sBAAsBC,GAAQ5P,EAAKU,MAAM+O,mBAAmBG,KACpFpE,MAAKvL,OAAAwL,EAAA,EAAAxL,CAAA,GAAMF,EAAMyL,MAAZ,CACHgB,gBAAe,QAAAhJ,OAAWxD,EAAKD,MAAMqD,OAAOwM,GAAOnM,EAApC,MAAAD,OAA4CxD,EAAKD,MAAMqD,OAAOwM,GAAOlM,EAArE,MAAAF,OAA6ExD,EAAKD,MAAMqD,OAAOwM,GAAOjM,EAAtG,YAGnB7E,EAAAC,EAAAC,cAAC8Q,EAAA,cAAD,CACEC,GAAI/P,EAAKU,MAAM+O,mBAAmBG,GAClCI,QAAS,IACTC,eAAa,EACbzF,WAAW,8BAEX1L,EAAAC,EAAAC,cAAA,OACEkR,aAAc,kBAAMlQ,EAAKQ,SAAS,CAAC2P,cAAc,KACjDC,aAAc,WACZpQ,EAAKQ,SAAS,CAAC2P,cAAc,IAC7BnQ,EAAK2P,sBAAsBC,GAAO,IAEpCpE,MAAO,CACL6E,UAAS,aAAA7M,QAAyBxD,EAAKD,MAAMwD,YAAYqM,GAASC,GAAKA,GAA7C,IAAqD,IAAtE,iBAGX/Q,EAAAC,EAAAC,cAACsR,EAAA,aAAD,CAAcC,cAAc,EAAM9D,MAAQzM,EAAKD,MAAMqD,OAAOwM,GAAStC,SAAW,SAACb,GAAD,OAAWzM,EAAKD,MAAMyQ,cAAc/D,EAAOmD,UAzDnI5P,EAAKU,MAAQ,CACX+O,mBAAoB,EAAC,GAAO,GAAO,GACnCU,cAAc,GALCnQ,oFAUjBoK,SAASC,iBAAiB,QAASlK,KAAK+O,aAAa,kDAIrD9E,SAASE,oBAAoB,QAASnK,KAAK+O,aAAa,0CAqD3C7G,EAAQ0D,EAAKC,GAC1B,OAAO,SAAArJ,GAAA,IAAG5C,EAAH4C,EAAG5C,MAAOkM,EAAVtJ,EAAUsJ,SAAV,OACLnN,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kCACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gCACbuM,MAAKvL,OAAAwL,EAAA,EAAAxL,CAAA,GAAMF,EAAMyL,QAEjB1M,EAAAC,EAAAC,cAAA,MAAAiB,OAAA+H,OAAA,GAASjI,EAAT,CAAgBd,UAAU,8BACvBgN,uCAOF,IAAA1B,EAAApK,KACP,OACErB,EAAAC,EAAAC,cAACkO,EAAA,MAAD,CACEnC,SAAU5K,KAAKO,MAAMyP,aACrB9H,OAAQlI,KAAKJ,MAAMwD,YACnB4J,KAjGK,EAkGLpB,IAAKiD,EACLhD,IAAK+C,EACLzB,SAAU,SAAAjF,GAAM,OAAIkC,EAAKxK,MAAM0Q,mBAAmBpI,IAClD+E,YAAajN,KAAKkN,eAAelN,KAAKJ,MAAMwD,YAAayL,EAAKD,GAC9DzD,YAAanL,KAAKmL,qBApGQjM,IAAMC,+CCiLzBoR,cA/Kb,SAAAA,EAAY3Q,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAuQ,IACjB1Q,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAyQ,GAAApQ,KAAAH,KAAMJ,KAeR4Q,UAAY,SAAAjJ,GACV,GAAI1H,EAAKU,MAAMe,aAAaO,SAAS0F,IAI9B,GAAG1H,EAAKU,MAAMqC,UAAW,CAC9B,IAAIyM,EAAGvP,OAAA2Q,EAAA,EAAA3Q,CAAOD,EAAKU,MAAMe,cACzB+N,EAAIqB,OAAOrB,EAAIsB,QAAQpJ,GAAY,GACnC1H,EAAKQ,SAAS,CAACiB,aAAc+N,UAN7BxP,EAAKQ,SAAS,CACZiB,aAAczB,EAAKU,MAAMe,aAAa+B,OAAOkE,MAnBhC1H,EA4BnBmI,WAAa,SAAAT,GACX,GAAG1H,EAAKU,MAAMqC,UAEZ/C,EAAKQ,SAAS,CAACiB,aAAczB,EAAKU,MAAMe,aAAasP,eAChD,GAAG/Q,EAAKU,MAAMe,aAAaO,SAAS0F,GAAa,CACtD,IAAI8H,EAAGvP,OAAA2Q,EAAA,EAAA3Q,CAAOD,EAAKU,MAAMe,cACzB+N,EAAIqB,OAAOrB,EAAIsB,QAAQpJ,GAAY,GACnC1H,EAAKQ,SAAS,CAACiB,aAAc+N,MAnCdxP,EAuCnByN,YAAc,SAAA1L,GAAK,OAAI/B,EAAKQ,SAAS,CAAC6E,SAAUtD,KAvC7B/B,EAyCnB4N,eAAiB,SAAA7L,GAAK,OAAK/B,EAAKQ,SAAS,CAACK,YAAakB,KAzCpC/B,EA2CnBwN,SAAW,SAAAzL,GAAK,OAAI/B,EAAKQ,SAAS,CAACuD,MAAOhC,KA3CvB/B,EA6CnBuN,aAAe,SAAAxL,GAAK,OAAI/B,EAAKQ,SAAS,CAAC6F,UAAWtE,KA7C/B/B,EA+CnBgR,cAAgB,kBAAMhR,EAAKQ,SAAS,CAACQ,SAAUhB,EAAKU,MAAMM,WA/CvChB,EAiDnBiR,gBAAkB,WAChBjR,EAAKQ,SAAS,CACZiB,aAAc,GACdsB,WAAY/C,EAAKU,MAAMqC,aApDR/C,EAwDnBwQ,cAAgB,SAAC/D,EAAOmD,GACtB,IAAIJ,EAAGvP,OAAA2Q,EAAA,EAAA3Q,CAAOD,EAAKU,MAAM0C,QACzBoM,EAAII,GAASnD,EAAMyE,IACnBlR,EAAKQ,SAAS,CAAE4C,OAAQoM,KA3DPxP,EA8DnByQ,mBAAqB,SAAClN,GACpBvD,EAAKQ,SAAS,CAAE+C,YAAaA,KA/DZvD,EAkEnBsD,aAAe,WACb,IAAI6N,EAAQlR,OAAA2Q,EAAA,EAAA3Q,CAAOD,EAAKU,MAAM0C,QAC1BgO,EAAW,GAEfD,EAASzB,KAAKyB,EAASA,EAAS9N,OAAO,IACvC,IAAI,IAAIF,EAAI,EAAGA,GAAKgO,EAAS9N,OAAQF,IACnCiO,EAAS1B,KAAK/O,KAAK0Q,MAAU,IAAJlO,GAAWgO,EAAS9N,OAAS,KAGxDrD,EAAKQ,SAAS,CAAE4C,OAAQ+N,EAAU5N,YAAa6N,KA3E9BpR,EA8EnBsR,gBAAkB,WAChB,IAAIH,EAAQlR,OAAA2Q,EAAA,EAAA3Q,CAAOD,EAAKU,MAAM0C,QAC1BgO,EAAW,GAEfD,EAASI,MACT,IAAI,IAAIpO,EAAI,EAAGA,GAAKgO,EAAS9N,OAAQF,IACnCiO,EAAS1B,KAAK/O,KAAK0Q,MAAU,IAAJlO,GAAWgO,EAAS9N,OAAS,KAGxDrD,EAAKQ,SAAS,CAAE4C,OAAQ+N,EAAU5N,YAAa6N,KAvF9BpR,EA0FnB8O,SAAW,SAACP,GACViD,QAAQ7F,IAAI4C,GACZvO,EAAKQ,SAAS,CAAE4C,OAAQmL,EAAMnL,OAAQG,YAAagL,EAAMlG,UA5FxCrI,EA+FnByR,YAAc,WAEZ,IADA,IAAIvO,EAAQ,6BACJC,EAAI,EAAGA,EAAInD,EAAKU,MAAM0C,OAAOC,OAAQF,IAC3CD,GAAQ,QAAAM,OAAaxD,EAAKU,MAAM0C,OAAOD,GAAGM,EAAlC,MAAAD,OAA0CxD,EAAKU,MAAM0C,OAAOD,GAAGO,EAA/D,MAAAF,OAAuExD,EAAKU,MAAM0C,OAAOD,GAAGQ,EAA5F,SAAAH,OAAqGxD,EAAKU,MAAM6C,YAAYJ,GAA5H,KACLA,EAAInD,EAAKU,MAAM0C,OAAOC,OAAS,IAChCH,GAAY,MAIhB,OADAA,GAAY,KApGZlD,EAAKU,MAAQ,CACXe,aAAc,GACdsB,WAAW,EACX/B,SAAS,EACTqE,SAAU,GACVxE,YAAa,IACbkD,MAAO,EACPsC,UAAW,EACXjD,OAAQiL,EAAO,GAAGtM,MAAMqB,OACxBG,YAAa8K,EAAO,GAAGtM,MAAMsG,QAZdrI,wEA2GV,IAAAuK,EAAApK,KACP,OACErB,EAAAC,EAAAC,cAAA,OAAKC,UAAWuL,IAAW,aAAc,CAACkH,QAAUhH,cAClD5L,EAAAC,EAAAC,cAAC2S,EAAA5S,EAAD,CAAkB6S,QAAM,EAACC,WAAY,CAACC,kBAAmB3R,KAAKsR,iBAC9D3S,EAAAC,EAAAC,cAAA,OAAKC,UAAWuL,IAAW,SAAU,CAACuH,OAASrH,cAC7C5L,EAAAC,EAAAC,cAACgT,EAAAjT,EAAD,KACG,SAAA6L,GAAA,IAAGhG,EAAHgG,EAAGhG,MAAOE,EAAV8F,EAAU9F,OAAV,OACChG,EAAAC,EAAAC,cAACiT,EAAD,CACErN,MAAOA,EACPE,OAAQA,EACR1B,OAAQmH,EAAK7J,MAAM0C,OACnBG,YAAagH,EAAK7J,MAAM6C,YACxB9B,aAAc8I,EAAK7J,MAAMe,aACzBT,QAASuJ,EAAK7J,MAAMM,QACpB+B,UAAWwH,EAAK7J,MAAMqC,UACtBsC,SAAUkF,EAAK7J,MAAM2E,SACrBxE,YAAa0J,EAAK7J,MAAMG,YACxBkD,MAAOwG,EAAK7J,MAAMqD,MAClBsC,UAAWkE,EAAK7J,MAAM2F,gBAK5BqE,YACA5L,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACbH,EAAAC,EAAAC,cAACkT,EAAD,CACE9O,OAAQjD,KAAKO,MAAM0C,OACnBG,YAAapD,KAAKO,MAAM6C,YACxBiN,cAAerQ,KAAKqQ,cACpBC,mBAAoBtQ,KAAKsQ,uBAI7B/F,YACA5L,EAAAC,EAAAC,cAAA,OAAKC,UAAU,aACbH,EAAAC,EAAAC,cAACmT,EAAD,CACE9M,SAAUlF,KAAKO,MAAM2E,SACrBoI,YAAatN,KAAKsN,YAClB5M,YAAaV,KAAKO,MAAMG,YACxB+M,eAAgBzN,KAAKyN,eACrB7J,MAAO5D,KAAKO,MAAMqD,MAClByJ,SAAUrN,KAAKqN,SACfnH,UAAWlG,KAAKO,MAAM2F,UACtBkH,aAAcpN,KAAKoN,aACnBxK,UAAW5C,KAAKO,MAAMqC,UACtB+K,YAAa3N,KAAK8Q,gBAClBjD,eAAgB7N,KAAKO,MAAM0C,OAAOC,OAClC4K,eAAgB9N,KAAKmD,aACrB4K,kBAAmB/N,KAAKmR,gBACxBxC,SAAU3O,KAAK2O,YAIrBhQ,EAAAC,EAAAC,cAAA,OAAKC,UAAWuL,IAAW,WAAY,CAAC4H,OAAS1H,cAC/C5L,EAAAC,EAAAC,cAACqT,EAAD,CACEvH,gBAAiB3K,KAAKwQ,UACtBxI,WAAYhI,KAAKgI,WACjB1G,aAActB,KAAKO,MAAMqC,UAAY5C,KAAKO,MAAMe,kBAAeH,EAC/DN,QAASb,KAAKO,MAAMM,QACpBkJ,UAAW/J,KAAK6Q,cAChBjO,UAAW5C,KAAKO,MAAMqC,qBAzKT1D,IAAMC,kBCU/B,IAAMgT,EAAclI,SAASmI,eAAe,QAC5CnD,IAASzG,OAAO7J,EAAAC,EAAAC,cAZhB,WACE,OACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,oBACXyL,YACA5L,EAAAC,EAAAC,cAACwT,EAAD,MAEF1T,EAAAC,EAAAC,cAACyT,EAAD,QAMU,MAASH","file":"static/js/main.deca7cb5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/SINE WAVES & SUMS.03bc2e03.svg\";","import React from \"react\";\r\n\r\nclass Banner extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"banner\">\r\n        <img className=\"banner--text\" src={require('./res/SINE WAVES & SUMS.svg')} alt={'Sine waves & Sums'}/>\r\n        <div className=\"banner--gradient\"/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Banner;\r\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst lineWidth = 3;\nconst tuneF = 440; \nconst xScale = 0.0001;\nconst yScale = 0.95;\nconst exposureScale = 1.05;\nconst decayActive = 0.98;\nconst decayInActive = 0.60;\n\nclass Canvas extends React.Component {\n\n  static propTypes = {\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    colors: PropTypes.arrayOf(PropTypes.object),\n    colorValues: PropTypes.arrayOf(PropTypes.number),\n    pressedNotes: PropTypes.arrayOf(PropTypes.number).isRequired,\n    sustain: PropTypes.bool.isRequired,\n    stickyKey: PropTypes.bool.isRequired,\n    exposure: PropTypes.number.isRequired,\n    phaseChange: PropTypes.number.isRequired,\n    scale: PropTypes.number.isRequired,\n    translate: PropTypes.number.isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      phaseOffset: 0\n    }\n\n    this.amplitudes = new Map([]);\n  }\n\n  componentDidMount() {\n    requestAnimationFrame(this.updateCanvas);\n  }\n  \n  componentDidUpdate(prevProps) {\n    this.updateAmplitudeAttack(prevProps);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  updatePhase = () => {\n    this.setState({\n      phaseOffset: this.state.phaseOffset + 2 * Math.PI * this.props.phaseChange / 100\n    });\n  }\n\n  updateAmplitudeAttack = (prevProps) => {\n    if(prevProps.sustain && prevProps.sustain !== this.props.sustain) {\n      this.amplitudes.clear();\n    }\n\n    for(var note of this.props.pressedNotes) {\n      if(!prevProps.pressedNotes.includes(note)) {\n        this.amplitudes.set(note, 1);\n      }\n    }\n  }\n\n  updateAmplitudeDecay = () => {\n    for (let [midi, amp] of this.amplitudes) {\n      if(this.props.stickyKey) {\n        if(!this.props.pressedNotes.includes(midi)) {\n          this.amplitudes.delete(midi);\n        }\n      } else if(amp < 0.002) {\n        this.amplitudes.delete(midi);\n      } else if (this.props.sustain || this.props.pressedNotes.includes(midi)) {\n        this.amplitudes.set(midi, amp * decayActive);\n      } else {\n        this.amplitudes.set(midi, amp * decayInActive);\n      }\n    }\n  }\n\n  buildGradient = gradient => {\n    for(var i = 0; i < this.props.colors.length; i++) {\n      gradient.addColorStop(\n        this.props.colorValues[i]/100, \n        `rgba(${ this.props.colors[i].r }, ${ this.props.colors[i].g }, ${ this.props.colors[i].b}, 1)`);\n    }\n    return gradient;\n  }\n\n  midiToFrequency = midi => Math.pow(2, (midi-69)/12) * tuneF;\n\n  getNormalizationScale = () => {\n    let scale = 0;\n    for(let [,amp] of this.amplitudes) {\n      scale += amp;\n    }\n    return scale < 1 ? 1 : 1/scale;\n  }\n\n  updateCanvas = () => {\n    const ctx = this.refs.canvas.getContext('2d');\n    let w = this.props.width;\n    let h = this.props.height;\n    let yOffset = h/2;\n    let xOffset = w/2;\n    \n    ctx.lineJoin = 'round';\n    ctx.lineWidth = lineWidth;\n\n    ctx.strokeStyle = this.buildGradient(ctx.createLinearGradient(0,0,w,0));\n\n    ctx.fillStyle = `rgba(0,0,0,${Math.pow(exposureScale, -this.props.exposure)})`;\n    ctx.fillRect(0, 0, w, h);\n\n    ctx.beginPath();\n\n    let normalizeScale = this.getNormalizationScale();\n    let phase = - this.state.phaseOffset;\n    for (var x = -5; x < w+5; x+=3) {\n      let y = yOffset;\n      for(let [midi] of this.amplitudes) {\n        let frequency = this.midiToFrequency(midi) * xScale;\n        let amplitude = (yScale * yOffset) * (this.amplitudes.get(midi) * normalizeScale);\n        \n        y += amplitude * Math.sin(frequency * (this.props.scale * (x - xOffset - this.props.translate)) + phase);\n      }\n      ctx.lineTo(x, y);\n    }\n    \n    ctx.lineTo(w+5, yOffset);\n\n    ctx.stroke();\n\n    this.updatePhase();\n    this.updateAmplitudeDecay();\n    requestAnimationFrame(this.updateCanvas);\n  } \n\n  render() {\n    return (\n      <canvas ref=\"canvas\" width={this.props.width} height={this.props.height}/>\n    );\n  }\n}\n\nexport default Canvas;\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Soundfont from \"soundfont-player\";\r\n\r\nclass SoundfontProvider extends React.Component {\r\n  \r\n  static propTypes = {\r\n    instrumentName: PropTypes.string.isRequired,\r\n    pressedNotes: PropTypes.arrayOf(PropTypes.number),\r\n    onStopNote: PropTypes.func, \r\n    sustain: PropTypes.bool.isRequired,\r\n    stickyKey: PropTypes.bool.isRequired,\r\n    hostname: PropTypes.string.isRequired,\r\n    format: PropTypes.oneOf([\"mp3\", \"ogg\"]),\r\n    soundfont: PropTypes.oneOf([\"MusyngKite\", \"FluidR3_GM\"]),\r\n    audioContext: PropTypes.instanceOf(window.AudioContext)\r\n  };\r\n\r\n  static defaultProps = {\r\n    format: \"mp3\",\r\n    soundfont: \"MusyngKite\",\r\n    instrumentName: \"acoustic_grand_piano\"\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      activeAudioNodes: {},\r\n      instrument: null\r\n    };\r\n\r\n    this.playNote = this.playNote.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadInstrument(this.props.instrumentName);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevProps.instrumentName !== this.props.instrumentName) {\r\n      this.loadInstrument(this.props.instrumentName);\r\n    }\r\n    if ((prevProps.sustain && prevProps.sustain !== this.props.sustain) || \r\n        (prevProps.stickyKey !== this.props.stickyKey)) {\r\n      this.stopAllNotes();\r\n    }\r\n  }\r\n\r\n  loadInstrument = instrumentName => {\r\n    // Re-trigger loading state\r\n    this.setState({\r\n      instrument: null\r\n    });\r\n    Soundfont.instrument(this.props.audioContext, instrumentName, {\r\n      format: this.props.format,\r\n      soundfont: this.props.soundfont,\r\n      nameToUrl: (name, soundfont, format) => {\r\n        return `${this.props.hostname}/${soundfont}/${name}-${format}.js`;\r\n      }\r\n    }).then(instrument => {\r\n      this.setState({\r\n        instrument\r\n      });\r\n    });\r\n  };\r\n\r\n  playNote = midiNumber => {\r\n    const audioNode = this.state.activeAudioNodes[midiNumber];\r\n    if (audioNode) {\r\n      if(this.props.stickyKey) {\r\n        return;\r\n      } else {\r\n        audioNode.stop();\r\n      }\r\n    }\r\n    this.props.audioContext.resume().then(() => {\r\n      const audioNode = this.state.instrument.play(midiNumber);\r\n      this.setState({\r\n        activeAudioNodes: Object.assign({}, this.state.activeAudioNodes, {\r\n          [midiNumber]: audioNode\r\n        })\r\n      });\r\n    });\r\n  };\r\n\r\n  stopNote = midiNumber => {\r\n    this.props.onStopNote(midiNumber);\r\n\r\n    this.props.audioContext.resume().then(() => {\r\n      if (this.props.sustain || this.props.stickyKey) {\r\n        return;\r\n      }\r\n      const audioNode = this.state.activeAudioNodes[midiNumber];\r\n      audioNode.stop();\r\n      this.setState({\r\n        activeAudioNodes: Object.assign({}, this.state.activeAudioNodes, {\r\n          [midiNumber]: null\r\n        })\r\n      });\r\n    });\r\n  };\r\n\r\n  // Clear any residual notes that don't get called with stopNote\r\n  stopAllNotes = () => {\r\n    this.props.audioContext.resume().then(() => {\r\n      const activeAudioNodes = Object.values(this.state.activeAudioNodes);\r\n      activeAudioNodes.forEach(node => {\r\n        if (node) {\r\n          node.stop();\r\n        }\r\n      });\r\n      this.setState({\r\n        activeAudioNodes: {}\r\n      });\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return this.props.render({\r\n      isLoading: !this.state.instrument,\r\n      playNote: this.playNote,\r\n      stopNote: this.stopNote,\r\n      stopAllNotes: this.stopAllNotes\r\n    });\r\n  }\r\n}\r\n\r\nexport default SoundfontProvider;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Piano, KeyboardShortcuts, MidiNumbers } from \"react-piano\";\r\nimport SoundfontProvider from \"./sounds/SoundfontProvider\";\r\nimport classNames from 'classnames';\r\nimport { isMobile } from \"react-device-detect\";\r\nimport \"react-piano/dist/styles.css\";\r\n\r\n// webkitAudioContext fallback needed to support Safari\r\nconst audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\nconst soundfontHostname = \"https://d1pzp51pvbm36p.cloudfront.net\";\r\n\r\n// TODO the notes should be dynamic depending on screen size\r\nconst noteRange = {\r\n  first: MidiNumbers.fromNote(\"a0\"),\r\n  last: MidiNumbers.fromNote(\"c8\")\r\n};\r\n\r\nconst mobileNoteRange = {\r\n  first: MidiNumbers.fromNote(\"c3\"),\r\n  last: MidiNumbers.fromNote(\"c5\")\r\n};\r\n\r\nconst keyboardShortcuts = KeyboardShortcuts.create({\r\n  firstNote: MidiNumbers.fromNote(\"a3\"),\r\n  lastNote: MidiNumbers.fromNote(\"d5\"),\r\n  keyboardConfig: KeyboardShortcuts.QWERTY_ROW\r\n});\r\n\r\nclass Keyboard extends React.Component {\r\n\r\n  static propTypes = {\r\n    onPlayNote: PropTypes.func,\r\n    onStopNote: PropTypes.func,\r\n    onPlayNoteInput: PropTypes.func,\r\n    pressedNotes: PropTypes.arrayOf(PropTypes.number),\r\n    stickyKey: PropTypes.bool.isRequired,\r\n    sustain: PropTypes.bool.isRequired,\r\n    onSustain: PropTypes.func\r\n  }\r\n\r\n  componentDidMount(){   \r\n    document.addEventListener(\"keydown\", this.handleKeyDown);\r\n    document.addEventListener(\"keyup\", this.handleKeyUp);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\r\n    document.removeEventListener(\"keyup\", this.handleKeyUp);\r\n  }                            \r\n\r\n  handleKeyDown = event => {\r\n    if(this.props.sustain) {\r\n      return;\r\n    } else if (event.key === ' ') {\r\n      this.props.onSustain();\r\n    }\r\n  };\r\n\r\n  handleKeyUp = event => {\r\n    if (this.props.sustain && event.key === ' ') {\r\n      this.props.onSustain();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"h-100\">\r\n        <div className={classNames('keyboard_keys', {'h-100 pb-3' : isMobile})}>\r\n          <div className=\"keyboard--felt\"/>\r\n          <SoundfontProvider\r\n            instrumentName=\"acoustic_grand_piano\"\r\n            audioContext={audioContext}\r\n            hostname={soundfontHostname}\r\n            sustain={this.props.sustain}\r\n            onStopNote={this.props.onStopNote}\r\n            pressedNotes={this.props.pressedNotes}\r\n            stickyKey={this.props.stickyKey}\r\n            render={({ isLoading, playNote, stopNote }) => (\r\n              <Piano\r\n                noteRange={isMobile ? mobileNoteRange : noteRange}\r\n                playNote={playNote}\r\n                stopNote={stopNote}\r\n                onPlayNoteInput={this.props.onPlayNoteInput}\r\n                disabled={isLoading}\r\n                activeNotes={this.props.pressedNotes}\r\n                keyboardShortcuts={isMobile ? null: keyboardShortcuts}\r\n              />\r\n            )}\r\n          />\r\n        </div>\r\n        {!isMobile &&\r\n          <div className=\"keyboard_footer vertical-align\">\r\n            <div className={classNames('keyboard_footer--sustain', {\r\n                'keyboard_footer--active' : this.props.sustain\r\n              })}\r\n              onMouseDown={this.props.onSustain}\r\n            />\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Keyboard;\r\n","let options = [\r\n  { value: {\r\n    colors: [\r\n      {r: '0', g: '0', b: '0', a: '1'}, \r\n      {r: '249', g: '117', b: '131', a: '1'}, \r\n      {r: '255', g: '171', b: '112', a: '1'}, \r\n      {r: '248', g: '248', b: '248', a: '1'},\r\n      {r: '0', g: '0', b: '0', a: '1'}\r\n    ],\r\n    values: [2, 33, 50, 66, 98]\r\n  }, \r\n  label: 'Min Theme' },\r\n  \r\n  { value: {\r\n      colors: [\r\n        {r: '0', g: '0', b: '0', a: '1'}, \r\n        {r: '220', g: '20', b: '60', a: '1'}, \r\n        {r: '255', g: '0', b: '255', a: '1'},\r\n        {r: '0', g: '0', b: '0', a: '1'}\r\n      ],\r\n      values: [0, 33, 66, 100]\r\n    }, \r\n    label: 'IntelliJ' },\r\n\r\n    { value: {\r\n      colors: [\r\n        {r: '64', g: '100', b: '139', a: '1'},\r\n        {r: '124', g: '93', b: '135', a: '1'},\r\n        {r: '184', g: '138', b: '178', a: '1'},\r\n        {r: '255', g: '131', b: '131', a: '1'},\r\n        {r: '242', g: '191', b: '191', a: '1'},\r\n      ],\r\n      values: [16, 32, 48, 64, 80]\r\n    }, \r\n    label: 'Sunrise' },\r\n\r\n    { value: {\r\n      colors: [\r\n        {r: '241', g: '103', b: '31', a: '1'}, \r\n        {r: '200', g: '27', b: '38', a: '1'},\r\n        {r: '155', g: '15', b: '95', a: '1'},\r\n        {r: '96', g: '4', b: '121', a: '1'},\r\n        {r: '22', g: '10', b: '71', a: '1'},\r\n      ],\r\n      values: [16, 32, 48, 64, 80]\r\n    }, \r\n    label: 'Sunset' },\r\n\r\n    { value: {\r\n      colors: [\r\n        {r: '0', g: '0', b: '0', a: '1'},\r\n        {r: '52', g: '61', b: '70', a: '1'},\r\n        {r: '255', g: '255', b: '255', a: '1'},\r\n        {r: '52', g: '61', b: '70', a: '1'},\r\n        {r: '0', g: '0', b: '0', a: '1'},\r\n      ],\r\n      values: [10, 40, 50, 60, 90]\r\n    }, \r\n    label: 'Moon' },\r\n\r\n    { value: {\r\n      colors: [\r\n        {r: '0', g: '0', b: '0', a: '1'},\r\n        {r: '57', g: '0', b: '46', a: '1'},\r\n        {r: '123', g: '0', b: '0', a: '1'},\r\n        {r: '255', g: '0', b: '0', a: '1'},\r\n        {r: '123', g: '0', b: '0', a: '1'},\r\n        {r: '57', g: '0', b: '46', a: '1'},\r\n        {r: '0', g: '0', b: '0', a: '1'},\r\n      ],\r\n      values: [20, 40, 45, 50, 55, 60, 80]\r\n    }, \r\n    label: 'Blood Moon' },\r\n\r\n    { value: {\r\n      colors: [\r\n        {r: '255', g: '179', b: '186', a: '1'},\r\n        {r: '255', g: '223', b: '186', a: '1'},\r\n        {r: '255', g: '255', b: '186', a: '1'},\r\n        {r: '186', g: '255', b: '201', a: '1'},\r\n        {r: '186', g: '225', b: '255', a: '1'}\r\n      ],\r\n      values: [16, 32, 48, 64, 80]\r\n    }, \r\n    label: 'Pastel Rainbow ' },\r\n\r\n];\r\n\r\n// {r: '', g: '', b: '', a: '1'}\r\n\r\nexport default options;","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from 'classnames';\r\nimport Select from 'react-select';\r\nimport { Range, getTrackBackground } from 'react-range';\r\nimport themes from './res/Themes';\r\n\r\n  const exposureMax = 100;\r\n  const exposureMin = 0;\r\n  const exposureStep = 5;\r\n\r\n  const phaseMax = 100;\r\n  const phaseMin = 0;\r\n  const phaseStep = 0.5;\r\n\r\n  const scaleMax = 5;\r\n  const scaleMin = -5;\r\n  const scaleStep = 1;\r\n\r\n  const translateMax = 999;\r\n  const translateMin = -999;\r\n  const translateStep = 1;\r\n\r\n  const colorStopMax = 10;\r\n  const colorStopMin = 2;\r\n\r\nclass Dashboard extends React.Component {\r\n  \r\n  static propTypes = {\r\n    exposure: PropTypes.number.isRequired,\r\n    setExposure: PropTypes.func.isRequired,\r\n    phaseChange: PropTypes.number.isRequired,\r\n    setPhaseChange: PropTypes.func.isRequired,\r\n    scale: PropTypes.number.isRequired,\r\n    setScale: PropTypes.func.isRequired,\r\n    translate: PropTypes.number.isRequired,\r\n    setTranslate: PropTypes.func.isRequired,\r\n    stickyKey: PropTypes.bool.isRequired,\r\n    onStickyKey:  PropTypes.func.isRequired,\r\n    colorStopCount: PropTypes.number.isRequired,\r\n    onAddColorStop: PropTypes.func.isRequired,\r\n    onRemoveColorStop: PropTypes.func.isRequired,\r\n    setTheme: PropTypes.func.isRequired\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      exposure: [this.props.exposure],\r\n      phaseChange: [this.props.phaseChange],\r\n      scaleRange: [this.scaleToRange(this.props.scale)],\r\n      translate: [this.props.translate] \r\n    }\r\n  }\r\n\r\n  renderThumb = ({ props, isDragged }) => (\r\n    <div className=\"dashboard_track_thumb\"\r\n      {...props}\r\n      style={{...props.style}}\r\n    />\r\n  )\r\n\r\n  getRenderTrack(values, min, max) {\r\n    return ({ props, children}) => (\r\n      <div className=\"dashboard_track--container\">\r\n        <div className=\"dashboard_track--progress\"\r\n          style={{...props.style,\r\n            background: getTrackBackground({\r\n              values: values,\r\n              colors: [\"transparent\", \"#666\"],\r\n              min: min,\r\n              max: max\r\n            })\r\n        }}>\r\n          <div {...props} className=\"dashboard_track\">\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  scaleToRange = (value) => {\r\n    return Math.log(value)/Math.log(2);\r\n  }\r\n\r\n  rangeToScale = (value) => {\r\n    return 2 ** value;\r\n  }\r\n\r\n  rangeToScaleString = (value) => {\r\n    return value >= 0 ? 2 ** value : `1/${2 ** -(value)}`;\r\n  }\r\n\r\n  render() {\r\n    let selectStyle = {\r\n      control: styles => ({ ...styles, borderColor: 'black', backgroundColor: '#404040', color: 'white'}),\r\n      placeholder: styles => ({ ...styles,  borderColor: 'black', color: 'white' }),\r\n      singleValue: (styles, { data }) => ({ ...styles, borderColor: 'black', color: 'white' }),\r\n      option: (styles, { data, isDisabled, isFocused, isSelected }) => {\r\n        return {...styles,\r\n          backgroundColor: isDisabled ? null : isSelected ? 'black' : isFocused ? 'lightgrey' : 'grey',\r\n          color: isDisabled ? '#ccc' : isSelected ? 'white' : 'black',\r\n        };\r\n      },\r\n    }\r\n    let selectTheme = (theme) => ({\r\n      ...theme,\r\n      borderRadius: '4px',\r\n      spacing: {\r\n        ...theme.spacing,\r\n        controlHeight: '25px',\r\n        baseUnit: '1',\r\n        menuGutter: '4'\r\n      },\r\n      colors: {\r\n      ...theme.colors,\r\n        primary: 'black'\r\n      },\r\n    });\r\n\r\n    return (\r\n      <div className=\"h-100 container-fluid\"> \r\n        <div className=\"h-100 row vertical-align\">\r\n        {/* Right Column */}\r\n        <div className=\"col-4 h-100\">\r\n            <div className=\"row h-50 py-2 vertical-align\">\r\n              <label>{`Translate: ${this.state.translate} rads`}</label>\r\n              <Range \r\n                max={translateMax} \r\n                min={translateMin} \r\n                step={translateStep}\r\n                values={this.state.translate} \r\n                renderTrack={this.getRenderTrack(this.state.translate, translateMin, translateMax)}\r\n                renderThumb={this.renderThumb}\r\n                onChange={value => {\r\n                    this.setState({translate: value}); \r\n                    this.props.setTranslate(value[0])}} \r\n              />\r\n            </div>\r\n            <div className=\"row h-50 py-2 vertical-align\">\r\n              <label>{`Scale: X${this.rangeToScaleString(this.state.scaleRange)}`}</label>\r\n              <Range \r\n                max={scaleMax} \r\n                min={scaleMin} \r\n                step={scaleStep}\r\n                values={this.state.scaleRange} \r\n                renderTrack={this.getRenderTrack(this.state.scaleRange, scaleMin, scaleMax)}\r\n                renderThumb={this.renderThumb}\r\n                onChange={value => {\r\n                    this.setState({scaleRange: value}); \r\n                    this.props.setScale(this.rangeToScale(value[0]))}} \r\n              />\r\n            </div>\r\n          </div>\r\n          {/* Middle Column */}\r\n          <div className=\"col-4 h-100\">\r\n            <div className=\"row h-50 py-2 vertical-align\">\r\n              <label>{`Exposure: ${this.state.exposure}%`}</label>\r\n              <Range \r\n                max={exposureMax} \r\n                min={exposureMin} \r\n                step={exposureStep}\r\n                values={this.state.exposure} \r\n                renderTrack={this.getRenderTrack(this.state.exposure, exposureMin, exposureMax)}\r\n                renderThumb={this.renderThumb}\r\n                onChange={value => {\r\n                    this.setState({exposure: value}); \r\n                    this.props.setExposure(value[0])}} \r\n              />\r\n            </div>\r\n            <div className=\"row h-50 py-2 vertical-align\">\r\n              <label>{`Δ Phase: ${Number(this.state.phaseChange).toFixed(1)}% 2π/frame`}</label>\r\n              <Range \r\n                max={phaseMax}\r\n                min={phaseMin} \r\n                step={phaseStep}\r\n                values={this.state.phaseChange} \r\n                renderTrack={this.getRenderTrack(this.state.phaseChange, phaseMin, phaseMax)}\r\n                renderThumb={this.renderThumb}\r\n                onChange={value => {\r\n                  this.setState({phaseChange: value}); \r\n                  this.props.setPhaseChange(value[0])}} \r\n              />       \r\n            </div>\r\n          </div>\r\n          {/* Right column */}\r\n          <div className=\"col-2 h-100\">\r\n            <div className=\"row h-50 py-2 vertical-align\">\r\n              <label>Sticky Keys - No Decay</label>\r\n              <div className=\"w-100\">\r\n                <div className={classNames('dashboard_button', {\r\n                    'dashboard--toggle-on' : this.props.stickyKey\r\n                  })}\r\n                  onMouseDown={this.props.onStickyKey}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"h-50 row vertical-align\">\r\n              <div class=\"mx-3\">\r\n                <label>Version 1.0 of the react project. Version 2.0 will be even better! (if I ever get to it...)</label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {/* Far Right column */}\r\n          <div className=\"col-2 h-100\">\r\n            <div className=\"row h-50 pb-1 vertical-align\">\r\n              <label>{`Color stops: ${this.props.colorStopCount}`}</label>\r\n              <div className=\"w-100 px-5\">\r\n                <div className=\"dashboard_button--up\" \r\n                  onMouseDown={this.props.colorStopCount < colorStopMax ? this.props.onAddColorStop : null}/>\r\n                <div className=\"dashboard_button--down\" \r\n                  onMouseDown={this.props.colorStopCount > colorStopMin ? this.props.onRemoveColorStop : null}/>\r\n              </div>\r\n            </div>\r\n            <div className=\"row h-50 py-2 vertical-align\">\r\n              <div className=\"w-100 px-3\">\r\n                <div className=\"dashboard_select--gradient-wrap\">\r\n                  <Select \r\n                    menuPlacement=\"top\" \r\n                    options={themes}\r\n                    defaultValue={themes[0]}\r\n                    label=\"Themes\"\r\n                    styles={selectStyle}\r\n                    theme={selectTheme}\r\n                    onChange={(option) => this.props.setTheme(option.value)}\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n","import React from \"react\";\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from \"prop-types\";\r\nimport { ChromePicker } from 'react-color';\r\nimport { Range } from 'react-range';\r\nimport { CSSTransition } from \"react-transition-group\"\r\n\r\nconst MAX = 100;\r\nconst MIN = 0;\r\nconst STEP = 1;\r\n\r\nclass GradientColorPicker extends React.Component {\r\n\r\n  static propTypes = {\r\n    colors: PropTypes.arrayOf(PropTypes.object),\r\n    colorValues: PropTypes.arrayOf(PropTypes.number),\r\n    onColorChange: PropTypes.func,\r\n    onColorValueChange: PropTypes.func\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n  \r\n    this.state = {\r\n      displayColorPicker: [false, false, false],\r\n      disableRange: false\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    document.addEventListener('click', this.handleClick, false);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener('click', this.handleClick, false);\r\n  }\r\n\r\n  handleClick = e => {\r\n    if(!ReactDOM.findDOMNode(this).contains(e.target)) {\r\n      var arr = [];\r\n      for(var i = 0; i < this.state.displayColorPicker.length; i++) {\r\n        arr.push(false);\r\n      }\r\n      this.setState({ displayColorPicker: arr })\r\n    }\r\n  }\r\n\r\n  setDisplayColorPicker = (index, value) => {\r\n    let arr = this.state.displayColorPicker;\r\n    arr[index] = value;\r\n    this.setState({ displayColorPicker: arr })\r\n  };\r\n\r\n  renderThumb = ({ props, isDragged, index }) => {\r\n    let mid = (MAX - MIN)/2;\r\n\r\n    return (\r\n      <div className=\"gradientColorPicker_track_thumb--container\" {...props}>\r\n        <div className=\"gradientColorPicker_track_thumb\" \r\n          onMouseDown={() => this.setDisplayColorPicker(index, !this.state.displayColorPicker[index])} \r\n          style={{...props.style, \r\n            backgroundColor: `rgba(${ this.props.colors[index].r }, ${ this.props.colors[index].g }, ${ this.props.colors[index].b}, 1)`\r\n          }}\r\n        />\r\n        <CSSTransition\r\n          in={this.state.displayColorPicker[index]}\r\n          timeout={300}\r\n          unmountOnExit\r\n          classNames=\"gradientColorPicker_picker\"\r\n        >\r\n          <div \r\n            onMouseEnter={() => this.setState({disableRange: true})} \r\n            onMouseLeave={() => {\r\n              this.setState({disableRange: false});\r\n              this.setDisplayColorPicker(index, false);\r\n            }} \r\n            style={{\r\n              transform: `translate(${(-100 * ((this.props.colorValues[index] - mid)/mid)) - 100}px, -235px)`\r\n            }}\r\n          >\r\n            <ChromePicker disableAlpha={true} color={ this.props.colors[index] } onChange={ (color) => this.props.onColorChange(color, index) } />\r\n          </div> \r\n        </CSSTransition>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  getRenderTrack(values, min, max) {\r\n    return ({ props, children }) => (\r\n      <div className=\"gradientColorPicker--container\">\r\n        <div className=\"gradientColorPicker--progress\"\r\n          style={{...props.style}}\r\n        >\r\n          <div {...props} className=\"gradientColorPicker_track\">\r\n            {children}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Range \r\n        disabled={this.state.disableRange}\r\n        values={this.props.colorValues}\r\n        step={STEP}\r\n        min={MIN}\r\n        max={MAX}\r\n        onChange={values => this.props.onColorValueChange(values)}\r\n        renderTrack={this.getRenderTrack(this.props.colorValues, MIN, MAX)}\r\n        renderThumb={this.renderThumb}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default GradientColorPicker;","import React from \"react\";\r\nimport Canvas from \"./Canvas\";\r\nimport Keyboard from \"./Keyboard\";\r\nimport Dashboard from \"./Dashboard\";\r\nimport GradientColorPicker from \"./GradientColorPicker\"\r\nimport themes from './res/Themes';\r\nimport classNames from 'classnames';\r\nimport CustomProperties from \"react-custom-properties\";\r\nimport { isMobile } from \"react-device-detect\";\r\nimport ContainerDimensions from 'react-container-dimensions'\r\n\r\nclass Visualizer extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      pressedNotes: [],\r\n      stickyKey: false,\r\n      sustain: false,\r\n      exposure: 25,\r\n      phaseChange: 2.5,\r\n      scale: 1,\r\n      translate: 0,\r\n      colors: themes[0].value.colors,\r\n      colorValues: themes[0].value.values\r\n    };\r\n  }\r\n\r\n  pressNote = midiNumber => {\r\n    if(!this.state.pressedNotes.includes(midiNumber)) {\r\n      this.setState({\r\n        pressedNotes: this.state.pressedNotes.concat(midiNumber)\r\n      });\r\n    } else if(this.state.stickyKey) {\r\n      let arr = [...this.state.pressedNotes];\r\n      arr.splice(arr.indexOf(midiNumber),1);\r\n      this.setState({pressedNotes: arr});\r\n    }\r\n  }\r\n\r\n  onStopNote = midiNumber => {\r\n    if(this.state.stickyKey) {\r\n      // The piano's active status is removed by the time this is called and needs to be re-rendered\r\n      this.setState({pressedNotes: this.state.pressedNotes.slice()});\r\n    } else if(this.state.pressedNotes.includes(midiNumber)) {\r\n      let arr = [...this.state.pressedNotes];\r\n      arr.splice(arr.indexOf(midiNumber),1);\r\n      this.setState({pressedNotes: arr});\r\n    }\r\n  }\r\n  \r\n  setExposure = value => this.setState({exposure: value});\r\n  \r\n  setPhaseChange = value =>  this.setState({phaseChange: value});\r\n\r\n  setScale = value => this.setState({scale: value});\r\n\r\n  setTranslate = value => this.setState({translate: value});\r\n\r\n  toggleSustain = () => this.setState({sustain: !this.state.sustain});\r\n  \r\n  toggleStickyKey = () => {\r\n    this.setState({\r\n      pressedNotes: [],\r\n      stickyKey: !this.state.stickyKey\r\n    });\r\n  }\r\n\r\n  onColorChange = (color, index) => {\r\n    let arr = [...this.state.colors];\r\n    arr[index] = color.rgb;\r\n    this.setState({ colors: arr })\r\n  }\r\n\r\n  onColorValueChange = (colorValues) => {\r\n    this.setState({ colorValues: colorValues })\r\n  }\r\n\r\n  addColorStop = () => {\r\n    let colorArr = [...this.state.colors];\r\n    let valueArr = [];\r\n    \r\n    colorArr.push(colorArr[colorArr.length-1]);\r\n    for(var i = 1; i <= colorArr.length; i++) {\r\n      valueArr.push(Math.floor(i * 100 / (colorArr.length + 1)));\r\n    }\r\n\r\n    this.setState({ colors: colorArr, colorValues: valueArr })\r\n  }\r\n\r\n  removeColorStop = () => {\r\n    let colorArr = [...this.state.colors];\r\n    let valueArr = [];\r\n    \r\n    colorArr.pop();\r\n    for(var i = 1; i <= colorArr.length; i++) {\r\n      valueArr.push(Math.floor(i * 100 / (colorArr.length + 1)));\r\n    }\r\n\r\n    this.setState({ colors: colorArr, colorValues: valueArr });\r\n  }\r\n\r\n  setTheme = (theme) => {\r\n    console.log(theme);\r\n    this.setState({ colors: theme.colors, colorValues: theme.values });\r\n  }\r\n\r\n  setGradient = () => {\r\n    let gradient = `linear-gradient(to right, `\r\n    for(var i = 0; i < this.state.colors.length; i++) {\r\n      gradient += `rgba(${ this.state.colors[i].r }, ${ this.state.colors[i].g }, ${ this.state.colors[i].b}, 1) ${this.state.colorValues[i]}%`;\r\n      if(i < this.state.colors.length - 1) {\r\n        gradient += ', '\r\n      }\r\n    }\r\n    gradient += ')';\r\n    return gradient;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={classNames('visualizer', {'h-100' : isMobile})}>\r\n        <CustomProperties global properties={{'--main-gradient': this.setGradient()}}/>\r\n        <div className={classNames('canvas', {'h-75' : isMobile})}>\r\n          <ContainerDimensions>\r\n            {({ width, height }) => \r\n              <Canvas \r\n                width={width} \r\n                height={height} \r\n                colors={this.state.colors}\r\n                colorValues={this.state.colorValues}\r\n                pressedNotes={this.state.pressedNotes}\r\n                sustain={this.state.sustain}\r\n                stickyKey={this.state.stickyKey}\r\n                exposure={this.state.exposure}\r\n                phaseChange={this.state.phaseChange}\r\n                scale={this.state.scale}\r\n                translate={this.state.translate}\r\n              />\r\n            }\r\n          </ContainerDimensions>\r\n        </div>\r\n        {!isMobile &&\r\n          <div className=\"gradientColorPicker\">\r\n            <GradientColorPicker\r\n              colors={this.state.colors}\r\n              colorValues={this.state.colorValues}\r\n              onColorChange={this.onColorChange}\r\n              onColorValueChange={this.onColorValueChange}\r\n            />\r\n          </div>\r\n        }\r\n        {!isMobile &&\r\n          <div className=\"dashboard\">\r\n            <Dashboard \r\n              exposure={this.state.exposure}\r\n              setExposure={this.setExposure}\r\n              phaseChange={this.state.phaseChange}\r\n              setPhaseChange={this.setPhaseChange}\r\n              scale={this.state.scale} \r\n              setScale={this.setScale}\r\n              translate={this.state.translate}\r\n              setTranslate={this.setTranslate}\r\n              stickyKey={this.state.stickyKey}\r\n              onStickyKey={this.toggleStickyKey}\r\n              colorStopCount={this.state.colors.length}\r\n              onAddColorStop={this.addColorStop}\r\n              onRemoveColorStop={this.removeColorStop}\r\n              setTheme={this.setTheme}\r\n            />\r\n          </div>\r\n        }\r\n        <div className={classNames('keyboard', {'h-25' : isMobile})}>\r\n          <Keyboard \r\n            onPlayNoteInput={this.pressNote}\r\n            onStopNote={this.onStopNote}\r\n            pressedNotes={this.state.stickyKey ? this.state.pressedNotes : undefined}\r\n            sustain={this.state.sustain}\r\n            onSustain={this.toggleSustain}\r\n            stickyKey={this.state.stickyKey}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Visualizer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { isMobile } from \"react-device-detect\";\r\nimport bootstrap from \"bootstrap\"; // eslint-disable-line no-unused-vars\r\nimport \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\r\nimport Banner from \"./visualizer/Banner\";\r\nimport Visualizer from \"./visualizer/Visualizer\";\r\n\r\nimport \"./styles.css\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"app height-full\">\r\n      {!isMobile && \r\n        <Banner />\r\n      }\r\n      <Visualizer />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n"],"sourceRoot":""}